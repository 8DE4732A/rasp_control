<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>V2PANEL</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col"><h3>订阅管理</h3></div>
      </div>
      <div class="row">
        <div class="col">
          <table class="table">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">名称</th>
                <th scope="col">ping</th>
                <th scope="col">speed</th>
              </tr>
            </thead>
            <tbody id="subscriptionList">
            </tbody>
          </table>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <button type="button" class="btn btn-primary" id="refresh">更新</button>
          <button type="button" class="btn btn-success" id="set">设置</button>
        </div>
      </div>

      <div class="row">
      </br>
      </div>
      <div class="row">
        <div class="col"><h3>控制</h3></div>
      </div>
      <div id="controlList" class="row row-cols-2">
        <div class="col"><button type="button" class="btn btn-info">Info</button></div>
      </div>
      <div class="row">
      </br>
      </div>
      <div class="row">
        <div class="col"><h3>配置文件</h3></div>
      </div>
      <div class="row">
        <div class="col">
          <form>
            <div class="form-group">
              <label for="config">Config.json</label>
              <textarea class="form-control" id="config" rows="8"></textarea>
              <button type="button" class="btn btn-info" id="refreshConfig">刷新</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script>
      //初始话订阅列表
      $.getJSON("/subscription", function(data){
        $.each(data, function(i,item){
          var ths = "<th scope=\"col\">" + i + "</th>";
          for(var i = 0; i < item.length; i++) {
            ths += "<th scope=\"col\">" + item[i] + "</th>";
          }
          $("#subscriptionList").append("<tr>" + ths + "</tr>");
        });
      });
      //初始化订阅按钮
      $("#refresh").on("click", function(){
        $.post();
        });
      $("#set").on("click", function(){
        $.post();
      });
      //初始化控制按钮
      $.getJSON("/control", function(data){
        $.each(data, function(i,item){
          let name = item["name"];
          $("#controlList").append(`<div class="col"><button type="button" class="btn btn-info">${name}</button></div>`);
        });
      });
      //初始化配置文件
      $("#refreshConfig").on("click", function(){
        refreshConfig();
      });
      function refreshConfig() {

      };
      refreshConfig();
    </script>
  </body>
</html>